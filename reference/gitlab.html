<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Request GitLab API — gitlab • gitlabr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Request GitLab API — gitlab"><meta property="og:description" content="This is 'gitlabr' core function to talk to GitLab's
server API via HTTP(S). Usually you will not
use this function directly too often, but either use 'gitlabr'
convenience wrappers or write your
own. See the 'gitlabr' vignette for more information on this."><meta property="og:image" content="https://thinkr-open.github.io/gitlabr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gitlabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.1.9010</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a-quick-start-guide-to-gitlabr.html">Quick Start Guide to 'gitlabr'</a>
    </li>
    <li>
      <a href="../articles/b-projects.html">Create and manage a new GitLab project</a>
    </li>
    <li>
      <a href="../articles/c-alternative-connection-to-projects.html">Alternative connections to projects</a>
    </li>
    <li>
      <a href="../articles/d-go-further-understand-and-build.html">Go further: understand and build your functions</a>
    </li>
    <li>
      <a href="../articles/e-create-gitlab-ci-pipelines.html">e-create-gitlab-ci-pipelines</a>
    </li>
    <li>
      <a href="../articles/z-gitlabr-v2.html">Breaking changes in 'gitlabr' V2</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ThinkR-open/gitlabr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Request GitLab API</h1>
    <small class="dont-index">Source: <a href="https://github.com/ThinkR-open/gitlabr/blob/HEAD/R/gitlab_api.R" class="external-link"><code>R/gitlab_api.R</code></a></small>
    <div class="hidden name"><code>gitlab.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is 'gitlabr' core function to talk to GitLab's
server API via HTTP(S). Usually you will not
use this function directly too often, but either use 'gitlabr'
convenience wrappers or write your
own. See the 'gitlabr' vignette for more information on this.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gitlab</span><span class="op">(</span></span>
<span>  <span class="va">req</span>,</span>
<span>  <span class="va">api_root</span>,</span>
<span>  verb <span class="op">=</span> <span class="fu">httr</span><span class="fu">::</span><span class="va"><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></span>,</span>
<span>  auto_format <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  gitlab_con <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  page <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  max_page <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  enforce_api_root <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  argname_verb <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">verb</span>, <span class="fu">httr</span><span class="fu">::</span><span class="va"><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></span><span class="op">)</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">verb</span>, <span class="fu">httr</span><span class="fu">::</span><span class="va"><a href="https://httr.r-lib.org/reference/DELETE.html" class="external-link">DELETE</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="st">"query"</span></span>
<span> <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>     <span class="st">"body"</span></span>
<span> <span class="op">}</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>req</dt>
<dd><p>vector of characters that represents the call
(e.g. <code>c("projects", project_id, "events")</code>)</p></dd>


<dt>api_root</dt>
<dd><p>URL where the GitLab API to request resides
(e.g. <code>https://gitlab.myserver.com/api/v3/</code>)</p></dd>


<dt>verb</dt>
<dd><p>http verb to use for request in form of one of the
<code>httr</code> functions
<code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">httr::GET()</a></code>, <code><a href="https://httr.r-lib.org/reference/PUT.html" class="external-link">httr::PUT()</a></code>, <code><a href="https://httr.r-lib.org/reference/POST.html" class="external-link">httr::POST()</a></code>, <code><a href="https://httr.r-lib.org/reference/DELETE.html" class="external-link">httr::DELETE()</a></code></p></dd>


<dt>auto_format</dt>
<dd><p>whether to format the returned object automatically
to a flat data.frame</p></dd>


<dt>debug</dt>
<dd><p>if TRUE API URL and query will be printed, defaults to FALSE</p></dd>


<dt>gitlab_con</dt>
<dd><p>function to use for issuing API requests
(e.g. as returned by <code><a href="set_gitlab_connection.html">get_gitlab_connection()</a></code></p></dd>


<dt>page</dt>
<dd><p>number of page of API response to get; if "all" (default),
all pages (up to max_page parameter!) are queried successively and combined.</p></dd>


<dt>max_page</dt>
<dd><p>maximum number of pages to retrieve.
Defaults to 10. This is an upper limit
to prevent 'gitlabr' getting stuck in retrieving
an unexpectedly high number of entries (e.g. of a
project list). It can be set to NA/Inf to retrieve
all available pages without limit, but this
is recommended only under controlled circumstances.</p></dd>


<dt>enforce_api_root</dt>
<dd><p>if multiple pages are requested,
the API root URL is ensured
to be the same as in the original call for all calls
using the "next page" URL returned
by GitLab This makes sense for security and in cases
where GitLab is behind a reverse proxy
and ignorant about its URL from external.</p></dd>


<dt>argname_verb</dt>
<dd><p>name of the argument of the verb
that fields and information are passed on to</p></dd>


<dt>...</dt>
<dd><p>named parameters to pass on to GitLab API
(technically: modifies query parameters of request URL),
may include private_token and all other parameters
as documented for the GitLab API</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>the response from the GitLab API,
usually as a <code>tibble</code> and including all pages</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>gitlab()</code> function allows to use any request
of the GitLab API <a href="https://docs.gitlab.com/ce/api/" class="external-link">https://docs.gitlab.com/ce/api/</a>.</p>
<p>For instance, the API documentation shows how to create a new project in
<a href="https://docs.gitlab.com/ce/api/projects.html#create-project" class="external-link">https://docs.gitlab.com/ce/api/projects.html#create-project</a>:</p><ul><li><p>The verb is <code>POST</code></p></li>
<li><p>The request is <code>projects</code></p></li>
<li><p>Required attributes are <code>name</code> or <code>path</code> (if <code>name</code> not set)</p></li>
<li><p><code>default_branch</code> is an attribute that can be set if wanted</p></li>
</ul><p>The corresponding use of <code>gitlab()</code> is:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">gitlab</span>(</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="at">req =</span> <span class="st">"projects"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="at">verb =</span> httr<span class="sc">::</span>POST,</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"toto"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="at">default_branch =</span> <span class="st">"main"</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>)</span></code></pre><p></p></div>
<p>Note: currently GitLab API v4 is supported.
GitLab API v3 is no longer supported, but
you can give it a try.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Connect as a fixed user to a GitLab instance</span></span></span>
<span class="r-in"><span><span class="fu"><a href="set_gitlab_connection.html">set_gitlab_connection</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  gitlab_url <span class="op">=</span> <span class="st">"https://gitlab.com"</span>,</span></span>
<span class="r-in"><span>  private_token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GITLAB_COM_TOKEN"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use a simple request</span></span></span>
<span class="r-in"><span><span class="fu">gitlab</span><span class="op">(</span>req <span class="op">=</span> <span class="st">"projects"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Use a combined request with extra parameters</span></span></span>
<span class="r-in"><span><span class="fu">gitlab</span><span class="op">(</span></span></span>
<span class="r-in"><span>  req <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"projects"</span>, <span class="fl">1234</span>, <span class="st">"issues"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  state <span class="op">=</span> <span class="st">"closed"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jirka Lewandowski, Sébastien Rochette.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

