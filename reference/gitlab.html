<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Request GitLab API — gitlab • gitlabr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Request GitLab API — gitlab" />
<meta property="og:description" content="This is gitlabr's core function to talk to GitLab's server API via HTTP(S). Usually you will not
use this function directly too often, but either use gitlabr's convenience wrappers or write your
own. See the gitlabr vignette for more information on this." />
<meta property="og:image" content="https://statnmap.github.io/gitlabr/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gitlabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a-quick-start-guide-to-gitlabr.html">Quick Start Guide to {gitlabr}</a>
    </li>
    <li>
      <a href="../articles/b-projects.html">Manage a project</a>
    </li>
    <li>
      <a href="../articles/c-alternative-connection-to-projects.html">Alternative connections to projects</a>
    </li>
    <li>
      <a href="../articles/d-go-further-understand-and-build.html">Go further: understand and build your functions</a>
    </li>
    <li>
      <a href="../articles/z-gitlabr-v2.html">Breaking changes in {gitlabr} V2</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/statnmap/gitlabr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Request GitLab API</h1>
    <small class="dont-index">Source: <a href='https://github.com/statnmap/gitlabr/blob/master/R/gitlab_api.R'><code>R/gitlab_api.R</code></a></small>
    <div class="hidden name"><code>gitlab.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is gitlabr's core function to talk to GitLab's server API via HTTP(S). Usually you will not
use this function directly too often, but either use gitlabr's convenience wrappers or write your
own. See the gitlabr vignette for more information on this.</p>
    </div>

    <pre class="usage"><span class='fu'>gitlab</span><span class='op'>(</span>
  <span class='va'>req</span>,
  <span class='va'>api_root</span>,
  verb <span class='op'>=</span> <span class='fu'>httr</span><span class='fu'>::</span><span class='va'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span>,
  auto_format <span class='op'>=</span> <span class='cn'>TRUE</span>,
  debug <span class='op'>=</span> <span class='cn'>FALSE</span>,
  gitlab_con <span class='op'>=</span> <span class='st'>"default"</span>,
  page <span class='op'>=</span> <span class='st'>"all"</span>,
  max_page <span class='op'>=</span> <span class='fl'>10</span>,
  enforce_api_root <span class='op'>=</span> <span class='cn'>TRUE</span>,
  argname_verb <span class='op'>=</span> <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>verb</span>, <span class='fu'>httr</span><span class='fu'>::</span><span class='va'><a href='https://httr.r-lib.org/reference/GET.html'>GET</a></span><span class='op'>)</span> <span class='op'>|</span> <span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>verb</span>, <span class='fu'>httr</span><span class='fu'>::</span><span class='va'><a href='https://httr.r-lib.org/reference/DELETE.html'>DELETE</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>    
    <span class='st'>"query"</span> <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>     <span class='st'>"body"</span> <span class='op'>}</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>req</th>
      <td><p>vector of characters that represents the call (e.g. <code><a href='https://rdrr.io/r/base/c.html'>c("projects", project_id, "events")</a></code>)</p></td>
    </tr>
    <tr>
      <th>api_root</th>
      <td><p>URL where the GitLab API to request resides (e.g. <code>https://gitlab.myserver.com/api/v3/</code>)</p></td>
    </tr>
    <tr>
      <th>verb</th>
      <td><p>http verb to use for request in form of one of the <code>httr</code> functions
<code><a href='https://httr.r-lib.org/reference/GET.html'>httr::GET()</a></code>, <code><a href='https://httr.r-lib.org/reference/PUT.html'>httr::PUT()</a></code>, <code><a href='https://httr.r-lib.org/reference/POST.html'>httr::POST()</a></code>, <code><a href='https://httr.r-lib.org/reference/DELETE.html'>httr::DELETE()</a></code></p></td>
    </tr>
    <tr>
      <th>auto_format</th>
      <td><p>whether to format the returned object automatically to a flat data.frame</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>if TRUE API URL and query will be printed, defaults to FALSE</p></td>
    </tr>
    <tr>
      <th>gitlab_con</th>
      <td><p>function to use for issuing API requests (e.g. as returned by
<code><a href='gitlabr-deprecated.html'>gitlab_connection()</a></code></p></td>
    </tr>
    <tr>
      <th>page</th>
      <td><p>number of page of API response to get; if "all" (default), all pages
(up to max_page parameter!) are queried successively and combined.</p></td>
    </tr>
    <tr>
      <th>max_page</th>
      <td><p>maximum number of pages to retrieve. Defaults to 10. This is an upper limit
to prevent gitlabr getting stuck in retrieving an unexpectedly high number of entries (e.g. of a
project list). It can be set to NA/Inf to retrieve all available pages without limit, but this
is recommended only under controlled circumstances.</p></td>
    </tr>
    <tr>
      <th>enforce_api_root</th>
      <td><p>if multiple pages are requested, the API root URL is ensured
to be the same as in the original call for all calls using the "next page" URL returned
by GitLab This makes sense for security and in cases where GitLab is behind a reverse proxy
and ignorant about its URL from external.</p></td>
    </tr>
    <tr>
      <th>argname_verb</th>
      <td><p>name of the argument of the verb that fields and information are passed on to</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>named parameters to pass on to GitLab API (technically: modifies query parameters of request URL),
may include private_token and all other parameters as documented for the GitLab API</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>the response from the GitLab API, usually as a <code>tibble</code> and including all pages</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>gitlab()</code> function allows to use any request of the GitLab API <a href='https://docs.gitlab.com/ce/api/'>https://docs.gitlab.com/ce/api/</a>.</p>
<p>For instance, the API documentation shows how to create a new project in
<a href='https://docs.gitlab.com/ee/api/projects.html#create-project'>https://docs.gitlab.com/ee/api/projects.html#create-project</a>:</p><ul>
<li><p>The verb is <code>POST</code></p></li>
<li><p>The request is <code>projects</code></p></li>
<li><p>Required attributes are <code>name</code> or <code>path</code> (if <code>name</code> not set)</p></li>
<li><p><code>default_branch</code> is an attribute that can be set if wanted</p></li>
</ul>

<p>The corresponding use of <code>gitlab()</code> is:</p><pre><span class='fu'>gitlab</span><span class='op'>(</span>
  req <span class='op'>=</span> <span class='st'>"projects"</span>,
  verb <span class='op'>=</span> <span class='fu'>httr</span><span class='fu'>::</span><span class='va'><a href='https://httr.r-lib.org/reference/POST.html'>POST</a></span>,
  name <span class='op'>=</span> <span class='st'>"toto"</span>,
  default_branch <span class='op'>=</span> <span class='st'>"main"</span>
<span class='op'>)</span>
</pre>

<p>Note: currently GitLab API v4 is supported. GitLab API v3 is no longer supported, but
you can give it a try.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Connect as a fixed user to a GitLab instance</span>
<span class='fu'><a href='set_gitlab_connection.html'>set_gitlab_connection</a></span><span class='op'>(</span>
  gitlab_url <span class='op'>=</span> <span class='st'>"https://gitlab.com"</span>, 
  private_token <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.getenv.html'>Sys.getenv</a></span><span class='op'>(</span><span class='st'>"GITLAB_COM_TOKEN"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># Use a simple request</span>
<span class='fu'>gitlab</span><span class='op'>(</span>req <span class='op'>=</span> <span class='st'>"projects"</span><span class='op'>)</span>
<span class='co'># Use a combined request with extra parameters</span>
<span class='fu'>gitlab</span><span class='op'>(</span>req <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"projects"</span>, <span class='fl'>1234</span>, <span class='st'>"issues"</span><span class='op'>)</span>,
       state <span class='op'>=</span> <span class='st'>"closed"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jirka Lewandowski, Sébastien Rochette.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


