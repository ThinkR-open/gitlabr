<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Contributing to gitlabr • gitlabr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>




<meta property="og:title" content="Contributing to gitlabr" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gitlabr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.6.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="articles/quick-start-guide-to-gitlabr.html">Quick Start Guide to {gitlabr}</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/statnmap/gitlabr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Contributing to gitlabr</h1>
    </div>

<div id="contributing-to-gitlabr" class="section level1">

<p>You’re welcome to contribute to gitlabr by editing the source code, adding more convenience functions, filing issues, etc. This document compiles some information helpful in that process.</p>
<p>Please also note the <a href="CONDUCT.html">Code of Conduct</a>.</p>
<div id="setup-a-local-development-environment" class="section level2">
<h2 class="hasAnchor">
<a href="#setup-a-local-development-environment" class="anchor"></a>Setup a local development environment</h2>
<p>If you want to run the test suite locally, you need to setup a Gitlab instance for testing. Then, in the file <code>tests/environment.yml</code> configuration variables are recorded about how to connect to the gitlab instance. <a href="tests/environment.yml.example">tests/environment.yml.example</a> contains an example configuration for a server that is, however, not publicly available for a testing.</p>
</div>
<div id="how-to-create-a-test-server" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-create-a-test-server" class="anchor"></a>How to create a test server</h2>
<p>The gitlab test suite expects certain entities (user, project, files) to be present in the test server. Here is how to setup a test server:</p>
<ul>
<li><p>install &amp; make gitlab instance reachable at a certain address (The easiest way is to use the a docker image of the gitlab version of interest or use <a href="https://gitlab.com" class="uri">https://gitlab.com</a>)</p></li>
<li>
<p>create a user</p>
<ul>
<li>Add your username in environment.yml as GITLABR_TEST_LOGIN</li>
<li>Add your user ID in environment.yml as GITLABR_TEST_LOGIN_ID (numeric)
<ul>
<li>Go to your profile (like <a href="https://gitlab.com/profile" class="uri">https://gitlab.com/profile</a>) and find your User ID</li>
</ul>
</li>
<li>Add your user password in environment.yml as GITLABR_TEST_PASSWORD</li>
</ul>
</li>
<li>
<p>generate a private access token for the user for the complete API</p>
<ul>
<li>For instance on Gitlab.com: <a href="https://gitlab.com/profile/personal_access_tokens" class="uri">https://gitlab.com/profile/personal_access_tokens</a>
</li>
<li>Add in the environment.yml or environment variables as “GITLABR_TEST_TOKEN”</li>
</ul>
</li>
<li>
<p>create a project called <code>testor</code>, owned by the user, and containing a README.md file</p>
<ul>
<li>New Project &gt; Initialize with a README</li>
<li>Add this name in the environment.yml as variable named “GITLABR_TEST_PROJECT_NAME”</li>
</ul>
</li>
<li>
<p>get the ID of the project and note it in the environment.yml as variable named ‘GITLABR_TEST_PROJECT_ID’</p>
<ul>
<li>Project Overview &gt; Details</li>
<li>The Project ID is under the name of your project</li>
</ul>
</li>
<li><p>give it a CI file that writes to a “test.txt” file</p></li>
<li>
<p>create an issue #1 with a comment</p>
<ul>
<li>Issues &gt; List &gt; New issue</li>
<li>Add title and description &gt; Open</li>
<li>Add comment</li>
</ul>
</li>
<li>
<p>Comment on a commit and note its SHA1 in the environment.yml as variable named ‘COMMENTED_COMMIT’</p>
<ul>
<li>Repository &gt; Commits</li>
<li>Click on one commit</li>
<li>Write a comment &gt; Comment</li>
<li>Find the <sha1> of the commit</sha1>
</li>
</ul>
</li>
<li><p>Create a branch named “for-tests”</p></li>
<li>
<p>On your computer:</p>
<ul>
<li>Clone the repository
<ul>
<li>Rstudio &gt; New project &gt; Version control &gt; git</li>
<li>Or git clone <a href="https://" class="uri">https://</a>…..testor.git</li>
</ul>
</li>
<li>Copy the content of “dev/testor” in the directory
<ul>
<li>It contains a R package with CI for tests</li>
</ul>
</li>
<li>Send to the <em>master</em> on the server</li>
</ul>
</li>
</ul>
<div id="how-to-run-the-test-suite" class="section level3">
<h3 class="hasAnchor">
<a href="#how-to-run-the-test-suite" class="anchor"></a>How to run the test suite</h3>
<p>When the test server is set up as described above tests can be run with the following R code that loads the recorded environment variables and runs the test code:</p>
<pre class="{r}"><code><a href="https://devtools.r-lib.org/">library(devtools)
library(yaml)
do.call(Sys.setenv, yaml.load_file("tests/environment.yml")) ## load test environment variables
test() ## run tests</a></code></pre>
</div>
<div id="api-version" class="section level3">
<h3 class="hasAnchor">
<a href="#api-version" class="anchor"></a>API version</h3>
<p>The test suite is intended for use with Gitlab API v4, compatibility with API v3 is no longer maintained. Still, you can switch to run the tests against API v3, by setting the environment variable <code>GITLABR_TEST_API_VERSION</code> to value <code>v3</code>. Note that API v3 is not present in recent gitlab versions!</p>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>



      <footer>
      <div class="copyright">
  <p>Developed by Jirka Lewandowski, Sébastien Rochette.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


